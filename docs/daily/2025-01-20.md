# 2025-01-20 ì‘ì—…ì¼ì§€

## ğŸ’» ì˜¤ëŠ˜ êµ¬í˜„í•œ ê²ƒ

### 1. SavedRecipeStateì— UI State í™€ë” íŒ¨í„´ ì ìš©
- ë‹¨ì¼ ìƒíƒœ ê°ì²´ë¡œ í†µí•©í•˜ì—¬ ìƒíƒœ ê´€ë¦¬ ê°œì„ 
  ```kotlin
  data class SavedRecipeState(
      val recipes: List<Recipe> = emptyList(),
      val isLoading: Boolean = false
  )
  ```
- Mock Repositoryì— 3ì´ˆ ë”œë ˆì´ ì¶”ê°€í•˜ì—¬ ë¡œë”© ìƒíƒœ êµ¬í˜„
- dotLottieë¥¼ í™œìš©í•œ ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€

### 2. SearchRecipesScreen êµ¬í˜„
- UI State í™€ë” íŒ¨í„´ì„ ì ìš©í•œ í™”ë©´ êµ¬ì„±
- ê²€ìƒ‰ì–´ ì…ë ¥ì— ë”°ë¥¸ ì‹¤ì‹œê°„ í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„
- ë¡œì»¬ ë°ì´í„° ê¸°ë°˜ ê²€ìƒ‰ ì²˜ë¦¬
- ê²€ìƒ‰ ê²°ê³¼ í™”ë©´ ë ˆì´ì•„ì›ƒ êµ¬ì„±

## ğŸ” ì‹œí–‰ì°©ì˜¤

### 1. InputField ì»´í¬ë„ŒíŠ¸ ê°œì„ 
- ë¦¬íŒ©í† ë§ì„ í†µí•´ ì•„ì´ì½˜ ì§€ì› ì¶”ê°€ (leading/trailing)
- í…ìŠ¤íŠ¸ ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ Box contentAlignment ì¡°ì •
- Rowì˜ fillMaxHeightë¥¼ í†µí•œ ì»´í¬ë„ŒíŠ¸ ì •ë ¬ ê°œì„ 
- ë†’ì´ì™€ ë‚´ë¶€ íŒ¨ë”© ìµœì í™”ë¡œ ë””ìì¸ ì¼ê´€ì„± í™•ë³´


## ğŸ“š ë°°ìš´ ì 

### 1. UI State íŒ¨í„´ì˜ íš¨ìœ¨ì„±
- ë‹¨ì¼ ìƒíƒœ ê°ì²´ë¥¼ í†µí•œ ìƒíƒœ ê´€ë¦¬ì˜ ì¥ì 
- ìƒíƒœ ë³€ê²½ì˜ ì˜ˆì¸¡ ê°€ëŠ¥ì„± í–¥ìƒ
- ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ì„± ì¦ê°€

### 2. Compose ë ˆì´ì•„ì›ƒ ìµœì í™”
- ì»´í¬ë„ŒíŠ¸ í¬ê¸°ì™€ ì •ë ¬ ê´€ë¦¬ ë°©ë²•
- fillMaxHeightì™€ contentAlignmentì˜ ì ì ˆí•œ í™œìš©

### 3. DotLottie í™œìš©
- ë¡œë”© ìƒíƒœ UI êµ¬í˜„
- ì• ë‹ˆë©”ì´ì…˜ ì„¤ì •ê³¼ ì œì–´
- ì„±ëŠ¥ì„ ê³ ë ¤í•œ êµ¬í˜„

## ğŸ¯ ë‹¤ìŒ ì‘ì—…
- [ ] UI í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

## ğŸ“ ì˜¤ëŠ˜ì˜ í•™ìŠµ

### UI State í™€ë” íŒ¨í„´

#### 1. UI ìƒíƒœì˜ ë‘ ê°€ì§€ ìœ í˜•
1. Screen UI state
    - UIë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ë°ì´í„°ë“¤(ViewModelì´ ê°–ê³  ìˆìŒ)
    - í™”ë©´ ë‹¨ìœ„ì˜ ìƒíƒœ ê´€ë¦¬
    - ìƒëª…ì£¼ê¸°ì™€ ë¬´ê´€í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨

2. UI element state
    - UI ì»´í¬ë„ŒíŠ¸ë“¤ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ìš”ì†Œë“¤(rememberë¡œ ìì²´ ê´€ë¦¬)
    - ë²„íŠ¼ì˜ pressed ìƒíƒœì™€ ê°™ì€ ì¼ì‹œì  ìƒíƒœ
    - UI ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸°ì— ì¢…ì†

#### 2. ìƒíƒœ íë¦„ê³¼ ë¡œì§

##### ìƒíƒœ ë³€í™” íë¦„
`UI State` â€”â€”>Logicâ€”â€”> `New UI State`
- UI ìƒíƒœëŠ” ì •ì ì¸ ì†ì„±ì´ ì•„ë‹Œ ë³€ìˆ˜
- ì‹œê°„ì´ íë¦„ì— ë”°ë¼ ì‚¬ìš©ì ì•¡ì…˜ì— ë”°ë¼ ë³€ê²½
- ë¡œì§ì€ ViewModelì´ ë‹´ë‹¹
- ViewModelì—ì„œ ì–´ë–¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ë©´ UI ì»´í¬ë„ŒíŠ¸ëŠ” ë³€ê²½ëœ ìƒíƒœë¡œ ì¸í•´ ë‹¤ì‹œ ê·¸ë ¤ì§

##### ë¡œì§ êµ¬ë¶„
| Screen / UI ìƒëª… ì£¼ê¸°ì™€ ë¬´ê´€ | Component / UI ìˆ˜ëª… ì£¼ê¸°ì— ì¢…ì† |
|--------------------------|--------------------------|
| ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ViewModel ë©”ì„œë“œ | UI ë¡œì§. ì»´í¬ì €ë¸” ë‚´ë¶€ì˜ ë¡œì§ |
| í™”ë©´ UI ìƒíƒœ ViewModel ë³€ìˆ˜ | |

#### 3. UI ë ˆì´ì–´ì˜ ë¡œì§ ì ìš© íë¦„
Data Layer â†’ ViewModel(Business logic, Screen UI State) â†’ UI Layer(UI Logic, UI Elements State, UI)

#### 4. UI State í™€ë”ì˜ ì¥ì 

##### ë‹¨ì¼ ìƒíƒœ ê°ì²´ ì‚¬ìš©
```kotlin
//ìƒíƒœë¥¼ í•©ì³ì„œ íƒ€ì… í•˜ë‚˜ë¡œ ë¬¶ì
data class NumberGuessState(
    val numberText: String = "",
    val guessText: String? = null,
    val isCorrect: Boolean = false,
)
```

##### ViewModelì—ì„œì˜ í™œìš©
```kotlin
class NumberGuessViewModel : ViewModel() {
    private val _state = MutableStateFlow(NumberGuessState())
    val state = _state.asStateFlow()
}
```

##### ìƒíƒœ ì—…ë°ì´íŠ¸
```kotlin
// Thread-safe ì—…ë°ì´íŠ¸
fun onNumberTextChange(newText: String) {
    _state.update {
        it.copy(
            numberText = newText
        )
    }
}
```

#### 5. copy() ì‚¬ìš©ì˜ ì´ì 

##### ë¶ˆë³€ì„±(Immutability)ì˜ ì¥ì 
- ìƒíƒœ ì¶”ì ì´ ìš©ì´
- ë™ì‹œì„± ë¬¸ì œ ë°©ì§€
- ë¶€ì‘ìš©(Side Effect)ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ
- ìƒíƒœ ë³€ê²½ì´ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§

##### StateFlowì˜ ë™ì‘ ë°©ì‹
```kotlin
// StateFlowëŠ” ê°’ì˜ ë³€ê²½ì„ ê°ì§€í•˜ì—¬ UIë¥¼ ì—…ë°ì´íŠ¸
private var _state = MutableStateFlow(NumberGuessState())
```
- StateFlowëŠ” ê°’ì˜ ì°¸ì¡°ê°€ ë³€ê²½ë  ë•Œ ì•Œë¦¼ì„ ë³´ëƒ„
- varë¡œ ë‚´ë¶€ ì†ì„±ë§Œ ë³€ê²½í•˜ë©´ StateFlowëŠ” ì´ ë³€ê²½ì„ ê°ì§€í•˜ì§€ ëª»í•  ìˆ˜ ìˆìŒ
- copy()ë¥¼ í†µí•œ ìƒˆë¡œìš´ ê°ì²´ ìƒì„±ì€ í™•ì‹¤í•œ ìƒíƒœ ë³€ê²½ ê°ì§€ë¥¼ ë³´ì¥

##### ë””ë²„ê¹…ê³¼ í…ŒìŠ¤íŠ¸ì˜ ìš©ì´ì„±
```kotlin
fun onGuessClick() {
    _state.update { currentState ->
        currentState.copy(
            // ë³€ê²½ì‚¬í•­ì´ ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚¨
            guessText = "Up",
            isCorrect = false
        )
    }
}
```
- ê° ìƒíƒœ ë³€ê²½ì´ ëª…ì‹œì ì´ì–´ì„œ ë””ë²„ê¹…ì´ ì‰¬ì›€
- ìƒíƒœ ë³€í™”ë¥¼ ì¶”ì í•˜ê¸° ì‰¬ì›Œ í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ ìš©ì´

##### ì„±ëŠ¥ ê´€ë ¨
- ëª¨ë˜ JVMì€ ì‘ì€ ê°ì²´ì˜ ìƒì„±ê³¼ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì„ ë§¤ìš° íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬
- copy() ì—°ì‚°ì˜ ì˜¤ë²„í—¤ë“œëŠ” ëŒ€ë¶€ë¶„ì˜ ì•±ì—ì„œ ë¬´ì‹œí•  ë§Œí•œ ìˆ˜ì¤€
- ì‹¤ì œë¡œ ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì€ ìµœì í™”ë¥¼ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŒ:
```kotlin
// ìƒíƒœ ì—…ë°ì´íŠ¸ ë¹ˆë„ ì¡°ì ˆ
private var _state = MutableStateFlow(NumberGuessState())
    .stateIn(viewModelScope, SharingStarted.Lazily, NumberGuessState())
```

#### 6. UI State í™€ë” íŒ¨í„´ì˜ ê²°ë¡ 
- í™”ë©´ í•˜ë‚˜ì— í•˜ë‚˜ì˜ UI State í™€ë”ë¥¼ ê°€ì§€ë„ë¡ í•¨
- ViewModelì€ í•˜ë‚˜ì˜ ìƒíƒœë¥¼ ì²˜ë¦¬
- ë¶ˆë³€ì„±ê³¼ ë‹¨ë°©í–¥ ë°ì´í„° íë¦„ì„ í†µí•œ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ìƒíƒœ ê´€ë¦¬
- í…ŒìŠ¤íŠ¸ì™€ ë””ë²„ê¹…ì´ ìš©ì´í•œ êµ¬ì¡°

## ğŸ”— ì°¸ê³  ìë£Œ
- [UI State í™€ë” íŒ¨í„´ ìˆ˜ì—…](https://docs.google.com/presentation/d/1L3CMKHsRd_pNZ9tnyPqWRgjG3iDQv39Otbi0Wruplqk/edit#slide=id.g32de4d4ded5_0_257)
- [UI State í™€ë” íŒ¨í„´ ì˜ìƒ](https://www.youtube.com/watch?v=B2uajRyTPVI)
- [ìƒíƒœí™€ë” ë° UI ìƒíƒœ](https://developer.android.com/topic/architecture/ui-layer/stateholders?hl=ko)
- [ë ˆì´ì•„ì›ƒ](https://tech.wonderwall.kr/articles/composelayout/body/)
- [dotLottie dependency](https://github.com/lottiefiles/dotlottie-android)